<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');

        //make a box for the stream
        var $stream = $('<div id="stream"></div>');
        $stream.appendTo($body);        
        //make a box for persons i want to look at
        var $targetStream = $('<div id="targetStream"></div>');
        // var $targetStream.appendTo($body);


        //message getter
        var UsersMessages =  function(getMessagesForUser){
          return streams.users[getMessagesForUser];
        }

        

        var Message = function(messageObject){
          var message = messageObject.message;
          var username = "@<a href='"+ messageObject.user +" link.html'>"+messageObject.user+"</a>:";
          var timestamp = messageObject.created_at;
          return username + ' ' + message + ' ' + timestamp
        }
        var ArrayMessageUnpack = function(userMessagesArray){
          
          for (var i=0; i< userMessagesArray.length;i++) {
            console.log(userMessagesArray[i])

            return Message(userMessagesArray[i]);
          }

        }



        // Stream constructor will build a <div> for the correct stream
        function Stream(type,username){
          // todo
          if (type === undefined){
            return undefined;
          } else if (type === 'home'){
            // create a home stream

          } else if (type === 'username') {
            // create a username stream
            var messages = UsersMessages(username);

            var index = messages.length;
            while (index >= 0) {
              // run Message function on message object

            }
          }
        }

        var refreshStream = function() {
          // refresh stream when you press the button
          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            $tweet.addClass('tweet');
          // isolate the parts of the message
            var $userLink = "@<a href='"+ tweet.user +" link.html'>"+tweet.user+"</a>:";
            var $message = tweet.message;
            var $timestamp = tweet.created_at;
          // make a whole tweet
            var $completeMsg = $userLink + ' ' + $message + ' ' + $timestamp
            $tweet.html($completeMsg);



            // $tweet.text('@' + tweet.user + ': ' + tweet.message + 
            //    ' ' + tweet.created_at);
          // put the tweets into the stream
            $tweet.appendTo($stream);
            index -= 1;
          }
        }
       // show home stream right off the bat      
        refreshStream(); 
      // make a button! attach it somewhere
        var $button = $('<button class="refreshButton"></button>')
        $body.prepend($button);
        $button.text('showsometweets')
        $button.on('click',refreshStream);
        $button.appendTo($body);

      });

    </script>
  </body>
</html>
