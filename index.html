<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');

        //make a box for the stream
        var $stream = $('<div id="stream"></div>');
        $stream.appendTo($body);        
        //make a box for persons i want to look at
        var $targetStream = $('<div id="targetStream"></div>');
        // var $targetStream.appendTo($body);

        //message constructor
        function Message(user,message,timestamp){
          this.user = user;
          this.message = message;
          this.timestamp = timestamp;

          var output = '';
          output += "<a href='"+ user +" link.html'>"+ user +"</a>";
          output += message;
          output += timestamp;
          
        }





        var refreshStream = function() {
          // refresh stream when you press the button
          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<div></div>');
            $tweet.addClass('tweet');
          // isolate the parts of the message
            var $userLink = "<a href='"+ tweet.user +" link.html'>"+tweet.user+"</a>";
            var $message = tweet.message;
            var $timestamp = tweet.created_at;
          // make a whole tweet
            var $completeMsg = $userLink + ' ' + $message + ' ' + $timestamp
            $tweet.html($completeMsg);



            // $tweet.text('@' + tweet.user + ': ' + tweet.message + 
            //    ' ' + tweet.created_at);
          // put the tweets into the stream
            $tweet.appendTo($stream);
            index -= 1;
          }

        }
        refreshStream();  // show home stream right off the bat      
        // make a button! attach it somewhere
        var $button = $('<button class="refreshButton"></button>')
        $body.prepend($button);
        $button.on('click',refreshStream);



        
        var button = $('button').text('button');
        
        button.appendTo($body);

      });

    </script>
  </body>
</html>
